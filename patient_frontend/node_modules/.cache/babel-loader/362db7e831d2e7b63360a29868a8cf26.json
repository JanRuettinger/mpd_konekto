{"ast":null,"code":"var _jsxFileName = \"/patient_frontend/src/src/Views/Home/SOSButton.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Typography } from '@material-ui/core';\nimport Button from '../../custom_theme/components/Button';\n\nclass SOSButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.classes = props.classes;\n    this.state = {\n      timerOn: false,\n      type: props.type\n    };\n    this.timerStart = this.timerStart.bind(this);\n    this.timerStop = this.timerStop.bind(this);\n    this.tick = this.tick.bind(this);\n    this.counter = 3;\n    this.counterStep = 1;\n  }\n\n  timerStart() {\n    this.timerID = setInterval(() => this.tick(), 1000);\n    this.setState({\n      timerOn: true\n    });\n    this.props.onSubmit(this.props.type, false); // var audio = new Audio(soundfile);\n    // setTimeout( () => audio.play(), 3500);\n  }\n\n  timerStop() {\n    clearInterval(this.timerID);\n    this.counter = 3;\n    this.setState({\n      timerOn: false\n    });\n    this.props.history.push('/');\n    console.log('INSIDE timer STOP' + this.props.type + true);\n    this.props.onSubmit(this.props.type, true);\n  }\n\n  tick() {\n    this.counter = this.counter - this.counterStep;\n\n    if (this.counter <= 0) {\n      this.setState({\n        timerOn: false\n      });\n      this.timerStop();\n      this.props.onSubmit(this.props.cancel);\n      this.props.history.push('/emergency_sent');\n    } else {\n      this.setState({\n        timerOn: true\n      });\n    }\n\n    console.log(this.counter);\n  }\n\n  render() {\n    let timerOn = this.state.timerOn;\n    let button;\n\n    if (timerOn) {\n      button = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        align: \"center\",\n        variant: \"h6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, ' ', \"You have \", this.counter, \" seconds to cancel the emergency SOS.\", ' '), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(Button, {\n        size: \"medium\",\n        color: \"primary\",\n        variant: \"text\",\n        onClick: this.timerStop,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Cancel emergency\"));\n    } else {\n      button = React.createElement(Button, {\n        size: \"medium\",\n        color: this.props.color,\n        variant: \"text\",\n        onClick: this.timerStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"INFORM \", this.props.rescuetype, \" NOW!\");\n    } // console.log(button);\n\n\n    return button;\n  }\n\n}\n\nexport default withRouter(SOSButton);","map":{"version":3,"sources":["/patient_frontend/src/src/Views/Home/SOSButton.js"],"names":["React","withRouter","Typography","Button","SOSButton","Component","constructor","props","classes","state","timerOn","type","timerStart","bind","timerStop","tick","counter","counterStep","timerID","setInterval","setState","onSubmit","clearInterval","history","push","console","log","cancel","render","button","color","rescuetype"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,OAAOC,MAAP,MAAmB,sCAAnB;;AAEA,MAAMC,SAAN,SAAwBJ,KAAK,CAACK,SAA9B,CAAwC;AACtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,OAAL,GAAeD,KAAK,CAACC,OAArB;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,KADE;AAEXC,MAAAA,IAAI,EAAEJ,KAAK,CAACI;AAFD,KAAb;AAIA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKE,IAAL,GAAY,KAAKA,IAAL,CAAUF,IAAV,CAAe,IAAf,CAAZ;AACA,SAAKG,OAAL,GAAe,CAAf;AACA,SAAKC,WAAL,GAAmB,CAAnB;AACD;;AAEDL,EAAAA,UAAU,GAAG;AACX,SAAKM,OAAL,GAAeC,WAAW,CAAC,MAAM,KAAKJ,IAAL,EAAP,EAAoB,IAApB,CAA1B;AACA,SAAKK,QAAL,CAAc;AAAEV,MAAAA,OAAO,EAAE;AAAX,KAAd;AACA,SAAKH,KAAL,CAAWc,QAAX,CAAoB,KAAKd,KAAL,CAAWI,IAA/B,EAAqC,KAArC,EAHW,CAIX;AACA;AACD;;AAEDG,EAAAA,SAAS,GAAG;AACVQ,IAAAA,aAAa,CAAC,KAAKJ,OAAN,CAAb;AACA,SAAKF,OAAL,GAAe,CAAf;AACA,SAAKI,QAAL,CAAc;AAAEV,MAAAA,OAAO,EAAE;AAAX,KAAd;AACA,SAAKH,KAAL,CAAWgB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsB,KAAKnB,KAAL,CAAWI,IAAjC,GAAwC,IAApD;AACA,SAAKJ,KAAL,CAAWc,QAAX,CAAoB,KAAKd,KAAL,CAAWI,IAA/B,EAAqC,IAArC;AACD;;AAEDI,EAAAA,IAAI,GAAG;AACL,SAAKC,OAAL,GAAe,KAAKA,OAAL,GAAe,KAAKC,WAAnC;;AACA,QAAI,KAAKD,OAAL,IAAgB,CAApB,EAAuB;AACrB,WAAKI,QAAL,CAAc;AAAEV,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,WAAKI,SAAL;AACA,WAAKP,KAAL,CAAWc,QAAX,CAAoB,KAAKd,KAAL,CAAWoB,MAA/B;AACA,WAAKpB,KAAL,CAAWgB,OAAX,CAAmBC,IAAnB,CAAwB,iBAAxB;AACD,KALD,MAKO;AACL,WAAKJ,QAAL,CAAc;AAAEV,QAAAA,OAAO,EAAE;AAAX,OAAd;AACD;;AACDe,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,OAAjB;AACD;;AAEDY,EAAAA,MAAM,GAAG;AACP,QAAIlB,OAAO,GAAG,KAAKD,KAAL,CAAWC,OAAzB;AACA,QAAImB,MAAJ;;AAEA,QAAInB,OAAJ,EAAa;AACXmB,MAAAA,MAAM,GACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,UAAD;AAAY,QAAA,KAAK,EAAC,QAAlB;AAA2B,QAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,GADH,eAEY,KAAKb,OAFjB,2CAE+D,GAF/D,CAFF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QANF,EAOE,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,KAAK,EAAC,SAFR;AAGE,QAAA,OAAO,EAAC,MAHV;AAIE,QAAA,OAAO,EAAE,KAAKF,SAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAPF,CADF;AAkBD,KAnBD,MAmBO;AACLe,MAAAA,MAAM,GACJ,oBAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,KAAK,EAAE,KAAKtB,KAAL,CAAWuB,KAFpB;AAGE,QAAA,OAAO,EAAC,MAHV;AAIE,QAAA,OAAO,EAAE,KAAKlB,UAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAMU,KAAKL,KAAL,CAAWwB,UANrB,UADF;AAUD,KAlCM,CAoCP;;;AACA,WAAOF,MAAP;AACD;;AAnFqC;;AAsFxC,eAAe5B,UAAU,CAACG,SAAD,CAAzB","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Typography } from '@material-ui/core';\nimport Button from '../../custom_theme/components/Button';\n\nclass SOSButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.classes = props.classes;\n    this.state = {\n      timerOn: false,\n      type: props.type\n    };\n    this.timerStart = this.timerStart.bind(this);\n    this.timerStop = this.timerStop.bind(this);\n    this.tick = this.tick.bind(this);\n    this.counter = 3;\n    this.counterStep = 1;\n  }\n\n  timerStart() {\n    this.timerID = setInterval(() => this.tick(), 1000);\n    this.setState({ timerOn: true });\n    this.props.onSubmit(this.props.type, false);\n    // var audio = new Audio(soundfile);\n    // setTimeout( () => audio.play(), 3500);\n  }\n\n  timerStop() {\n    clearInterval(this.timerID);\n    this.counter = 3;\n    this.setState({ timerOn: false });\n    this.props.history.push('/');\n    console.log('INSIDE timer STOP' + this.props.type + true);\n    this.props.onSubmit(this.props.type, true);\n  }\n\n  tick() {\n    this.counter = this.counter - this.counterStep;\n    if (this.counter <= 0) {\n      this.setState({ timerOn: false });\n      this.timerStop();\n      this.props.onSubmit(this.props.cancel);\n      this.props.history.push('/emergency_sent');\n    } else {\n      this.setState({ timerOn: true });\n    }\n    console.log(this.counter);\n  }\n\n  render() {\n    let timerOn = this.state.timerOn;\n    let button;\n\n    if (timerOn) {\n      button = (\n        <div>\n          <br />\n          <Typography align=\"center\" variant=\"h6\">\n            {' '}\n            You have {this.counter} seconds to cancel the emergency SOS.{' '}\n          </Typography>\n          <br />\n          <Button\n            size=\"medium\"\n            color=\"primary\"\n            variant=\"text\"\n            onClick={this.timerStop}\n          >\n            Cancel emergency\n          </Button>\n        </div>\n      );\n    } else {\n      button = (\n        <Button\n          size=\"medium\"\n          color={this.props.color}\n          variant=\"text\"\n          onClick={this.timerStart}\n        >\n          INFORM {this.props.rescuetype} NOW!\n        </Button>\n      );\n    }\n\n    // console.log(button);\n    return button;\n  }\n}\n\nexport default withRouter(SOSButton);\n"]},"metadata":{},"sourceType":"module"}