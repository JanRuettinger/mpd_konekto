{"ast":null,"code":"var _jsxFileName = \"/patient_frontend/src/src/Views/EmergencyDetails/index.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Grid } from '@material-ui/core';\nimport { Header } from '../../Layout';\nimport FormPersonType from './FormPersonType';\nimport FormEmergencyType from './FormEmergencyType';\nimport Textbox from './Textbox';\nimport ProgressiveMobileStepper from './ProgressiveMobileStepper';\nimport AppContext from '../../utils/AppContext';\nimport CONST from '../../utils/Constants';\nimport Button from '../../custom_theme/components/Button';\nimport Container from '../../custom_theme/components/Container';\nimport GridContainer from '../../custom_theme/components/GridContainer';\nimport soundfile from '../Home/EmergencySent.mp3';\n\nconst styles = theme => ({// container: {\n  //   alignItems: 'center',\n  //   height: '60%',\n  //   border: 'black',\n  //   'border-width': 'medium',\n  //   'margin-top': '50px',\n  //   background: 'rgba(255, 255, 255, 0.8)',\n  //   'border-radius': '20px'\n  // },\n  // item: {\n  //   width: '100%',\n  //   'text-align': 'center',\n  //   'border-radius': '5px',\n  //   'margin-top': '5px',\n  //   'justify-content': 'center'\n  // },\n  // container2: {\n  //   border: 'black',\n  //   'border-width': 'medium',\n  //   'margin-top': '30px'\n  // },\n  // picture: { display: 'block', margin: '0 auto' },\n  // box: { width: '230px' },\n  // button: {\n  //   width: '80%'\n  // }\n});\n\nclass SOS extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      timerOn: false,\n      componentType: 'type_of_emergency',\n      //type_of_person //texbox\n      meAffected: false,\n      anotherPerson: false,\n      lifeatdanger: false,\n      injury: false,\n      illness: false,\n      poisoning: false,\n      firesmoke: false,\n      other: false,\n      emergencyNote: '',\n      activeStep: 0\n    };\n    this.classes = props.classes;\n    this.handleNext = this.handleNext.bind(this);\n    this.handleBack = this.handleBack.bind(this);\n    this.handleEmergencyType = this.handleEmergencyType.bind(this);\n    this.handleAffectedPeople = this.handleAffectedPeople.bind(this);\n    this.handleEmergencyNote = this.handleEmergencyNote.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.handleFinished = this.handleFinished.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n  }\n\n  onCancel() {\n    // window.alert('Your emergency request has been CANCELLED');\n    this.props.history.push('/');\n  }\n\n  showSettings(event) {\n    event.preventDefault();\n  }\n\n  handleNext(e) {\n    if (this.state.componentType === 'type_of_emergency') {\n      this.setState({\n        componentType: 'type_of_person'\n      });\n    } else if (this.state.componentType === 'type_of_person') this.setState({\n      componentType: 'textbox'\n    });else if (this.state.componentType === 'textbox') {\n      this.props.history.push('/loading'); //   var audio = new Audio(soundfile);\n      // setTimeout( () => audio.play(), 1000);\n    }\n\n    this.setState({\n      activeStep: this.state.activeStep + 1\n    });\n  }\n\n  handleBack(e) {\n    if (this.state.componentType === 'textbox') {\n      this.setState({\n        componentType: 'type_of_person'\n      });\n    } else if (this.state.componentType === 'type_of_person') {\n      this.setState({\n        componentType: 'type_of_emergency'\n      });\n    } else if (this.state.componentType === 'type_of_emergency') {\n      this.props.history.push('/emergency_sent');\n    }\n\n    this.setState({\n      activeStep: this.state.activeStep - 1\n    });\n  }\n\n  handleEmergencyType(new_emergency_state) {\n    console.log('In handleEmergencyType');\n    console.log(this.state);\n    console.log(new_emergency_state);\n    this.setState(new_emergency_state);\n  }\n\n  handleAffectedPeople(new_affected_people_state) {\n    console.log('In handleAffectedPeople');\n    console.log(new_affected_people_state);\n    this.setState(new_affected_people_state);\n    console.log(this.state);\n  }\n\n  async handleEmergencyNote(new_emergency_note_state) {\n    console.log('In handleEmergencyNote');\n    await this.setState(new_emergency_note_state);\n    await this.handleFinished();\n  }\n\n  handleFinished() {\n    // transmit emergency details data\n    let data = '';\n\n    if (this.state.meAffected === true) {\n      data += 'Caller';\n    }\n\n    if (this.state.anotherPerson === true) {\n      data += ' & another person';\n    }\n\n    this.context.setAffectedPersons(data);\n    data = '';\n\n    if (this.state.injury === true) {\n      data += 'Injury ';\n    }\n\n    if (this.state.lifeatdanger === true) {\n      if (data == '') {\n        data += 'Life is at danger';\n      } else {\n        data += ', Life is at danger';\n      }\n    }\n\n    if (this.state.poisoning === true) {\n      if (data == '') {\n        data += 'Person might be poisoned';\n      } else {\n        data += ', Person might be poisoned';\n      }\n    }\n\n    if (this.state.firesmoke === true) {\n      if (data == '') {\n        data += 'Fire is involved';\n      } else {\n        data += ', fire is involved';\n      }\n    }\n\n    this.context.setEmergencyDetails(data);\n    this.context.setEmergencyNote(this.state.emergencyNote);\n    this.props.history.push('/loading'); // var audio = new Audio(soundfile);\n    // setTimeout(() => audio.play(), 500);\n  }\n\n  onSubmit(e) {\n    console.log('in OnSubmit');\n  }\n\n  render() {\n    let component;\n\n    if (this.state.componentType === 'type_of_emergency') {\n      component = React.createElement(FormEmergencyType, {\n        handleComponentType: this.handleComponentType,\n        handleEmergencyType: this.handleEmergencyType,\n        emergencyTypes: this.state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      });\n    } else if (this.state.componentType === 'type_of_person') {\n      component = React.createElement(FormPersonType, {\n        handleComponentType: this.handleComponentType,\n        handleAffectedPeople: this.handleAffectedPeople,\n        personTypes: this.state,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      });\n    } else if (this.state.componentType === 'textbox') {\n      component = React.createElement(Textbox, {\n        handleEmergencyNote: this.handleEmergencyNote,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(Header, {\n      title: \"Specify Emergency\",\n      BackButton: \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(Container, {\n      component: \"main\",\n      maxWidth: \"sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(GridContainer, {\n      container: true // className={this.classes.container}\n      ,\n      direction: \"column\",\n      spacing: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      sm: 12,\n      className: this.classes.item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, component)), React.createElement(Grid, {\n      container: true // className={this.classes.container2}\n      ,\n      direction: \"column\",\n      spacing: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      sm: 12,\n      className: this.classes.item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(ProgressiveMobileStepper, {\n      handleNext: this.handleNext,\n      handleBack: this.handleBack,\n      handleFinished: this.handleFinished,\n      activeStep: this.state.activeStep,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), React.createElement(Button // className={this.classes.button}\n    , {\n      variant: \"text\",\n      color: \"secondary\",\n      size: \"medium\",\n      style: {\n        backgroundColor: 'grey',\n        color: 'white'\n      },\n      onClick: this.onCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"Cancel Emergency\")))));\n  }\n\n}\n\nSOS.contextType = AppContext;\nexport default withRouter(withStyles(styles)(SOS));","map":{"version":3,"sources":["/patient_frontend/src/src/Views/EmergencyDetails/index.js"],"names":["React","axios","withRouter","withStyles","Grid","Header","FormPersonType","FormEmergencyType","Textbox","ProgressiveMobileStepper","AppContext","CONST","Button","Container","GridContainer","soundfile","styles","theme","SOS","Component","constructor","props","state","timerOn","componentType","meAffected","anotherPerson","lifeatdanger","injury","illness","poisoning","firesmoke","other","emergencyNote","activeStep","classes","handleNext","bind","handleBack","handleEmergencyType","handleAffectedPeople","handleEmergencyNote","onSubmit","handleFinished","onCancel","history","push","showSettings","event","preventDefault","e","setState","new_emergency_state","console","log","new_affected_people_state","new_emergency_note_state","data","context","setAffectedPersons","setEmergencyDetails","setEmergencyNote","render","component","handleComponentType","item","backgroundColor","color","contextType"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,wBAAP,MAAqC,4BAArC;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,MAAP,MAAmB,sCAAnB;AACA,OAAOC,SAAP,MAAsB,yCAAtB;AACA,OAAOC,aAAP,MAA0B,6CAA1B;AACA,OAAOC,SAAP,MAAsB,2BAAtB;;AAEA,MAAMC,MAAM,GAAGC,KAAK,KAAK,CACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BuB,CAAL,CAApB;;AA6BA,MAAMC,GAAN,SAAkBlB,KAAK,CAACmB,SAAxB,CAAkC;AAGhCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,KADE;AAEXC,MAAAA,aAAa,EAAE,mBAFJ;AAEyB;AAEpCC,MAAAA,UAAU,EAAE,KAJD;AAKXC,MAAAA,aAAa,EAAE,KALJ;AAMXC,MAAAA,YAAY,EAAE,KANH;AAOXC,MAAAA,MAAM,EAAE,KAPG;AAQXC,MAAAA,OAAO,EAAE,KARE;AASXC,MAAAA,SAAS,EAAE,KATA;AAUXC,MAAAA,SAAS,EAAE,KAVA;AAWXC,MAAAA,KAAK,EAAE,KAXI;AAYXC,MAAAA,aAAa,EAAE,EAZJ;AAcXC,MAAAA,UAAU,EAAE;AAdD,KAAb;AAgBA,SAAKC,OAAL,GAAed,KAAK,CAACc,OAArB;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKE,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBF,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKG,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BH,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKI,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBJ,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKK,QAAL,GAAgB,KAAKA,QAAL,CAAcL,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKM,cAAL,GAAsB,KAAKA,cAAL,CAAoBN,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKO,QAAL,GAAgB,KAAKA,QAAL,CAAcP,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEDO,EAAAA,QAAQ,GAAG;AACT;AACA,SAAKvB,KAAL,CAAWwB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;;AAEDC,EAAAA,YAAY,CAACC,KAAD,EAAQ;AAClBA,IAAAA,KAAK,CAACC,cAAN;AACD;;AAEDb,EAAAA,UAAU,CAACc,CAAD,EAAI;AACZ,QAAI,KAAK5B,KAAL,CAAWE,aAAX,KAA6B,mBAAjC,EAAsD;AACpD,WAAK2B,QAAL,CAAc;AAAE3B,QAAAA,aAAa,EAAE;AAAjB,OAAd;AACD,KAFD,MAEO,IAAI,KAAKF,KAAL,CAAWE,aAAX,KAA6B,gBAAjC,EACL,KAAK2B,QAAL,CAAc;AAAE3B,MAAAA,aAAa,EAAE;AAAjB,KAAd,EADK,KAEF,IAAI,KAAKF,KAAL,CAAWE,aAAX,KAA6B,SAAjC,EAA4C;AAC/C,WAAKH,KAAL,CAAWwB,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB,EAD+C,CAE/C;AACA;AACD;;AACD,SAAKK,QAAL,CAAc;AAAEjB,MAAAA,UAAU,EAAE,KAAKZ,KAAL,CAAWY,UAAX,GAAwB;AAAtC,KAAd;AACD;;AAEDI,EAAAA,UAAU,CAACY,CAAD,EAAI;AACZ,QAAI,KAAK5B,KAAL,CAAWE,aAAX,KAA6B,SAAjC,EAA4C;AAC1C,WAAK2B,QAAL,CAAc;AAAE3B,QAAAA,aAAa,EAAE;AAAjB,OAAd;AACD,KAFD,MAEO,IAAI,KAAKF,KAAL,CAAWE,aAAX,KAA6B,gBAAjC,EAAmD;AACxD,WAAK2B,QAAL,CAAc;AAAE3B,QAAAA,aAAa,EAAE;AAAjB,OAAd;AACD,KAFM,MAEA,IAAI,KAAKF,KAAL,CAAWE,aAAX,KAA6B,mBAAjC,EAAsD;AAC3D,WAAKH,KAAL,CAAWwB,OAAX,CAAmBC,IAAnB,CAAwB,iBAAxB;AACD;;AACD,SAAKK,QAAL,CAAc;AAAEjB,MAAAA,UAAU,EAAE,KAAKZ,KAAL,CAAWY,UAAX,GAAwB;AAAtC,KAAd;AACD;;AAEDK,EAAAA,mBAAmB,CAACa,mBAAD,EAAsB;AACvCC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKhC,KAAjB;AACA+B,IAAAA,OAAO,CAACC,GAAR,CAAYF,mBAAZ;AACA,SAAKD,QAAL,CAAcC,mBAAd;AACD;;AAEDZ,EAAAA,oBAAoB,CAACe,yBAAD,EAA4B;AAC9CF,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYC,yBAAZ;AACA,SAAKJ,QAAL,CAAcI,yBAAd;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKhC,KAAjB;AACD;;AAED,QAAMmB,mBAAN,CAA0Be,wBAA1B,EAAoD;AAClDH,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA,UAAM,KAAKH,QAAL,CAAcK,wBAAd,CAAN;AACA,UAAM,KAAKb,cAAL,EAAN;AACD;;AACDA,EAAAA,cAAc,GAAG;AACf;AAEA,QAAIc,IAAI,GAAG,EAAX;;AAEA,QAAI,KAAKnC,KAAL,CAAWG,UAAX,KAA0B,IAA9B,EAAoC;AAClCgC,MAAAA,IAAI,IAAI,QAAR;AACD;;AACD,QAAI,KAAKnC,KAAL,CAAWI,aAAX,KAA6B,IAAjC,EAAuC;AACrC+B,MAAAA,IAAI,IAAI,mBAAR;AACD;;AACD,SAAKC,OAAL,CAAaC,kBAAb,CAAgCF,IAAhC;AAEAA,IAAAA,IAAI,GAAG,EAAP;;AAEA,QAAI,KAAKnC,KAAL,CAAWM,MAAX,KAAsB,IAA1B,EAAgC;AAC9B6B,MAAAA,IAAI,IAAI,SAAR;AACD;;AACD,QAAI,KAAKnC,KAAL,CAAWK,YAAX,KAA4B,IAAhC,EAAsC;AACpC,UAAI8B,IAAI,IAAI,EAAZ,EAAgB;AACdA,QAAAA,IAAI,IAAI,mBAAR;AACD,OAFD,MAEO;AACLA,QAAAA,IAAI,IAAI,qBAAR;AACD;AACF;;AACD,QAAI,KAAKnC,KAAL,CAAWQ,SAAX,KAAyB,IAA7B,EAAmC;AACjC,UAAI2B,IAAI,IAAI,EAAZ,EAAgB;AACdA,QAAAA,IAAI,IAAI,0BAAR;AACD,OAFD,MAEO;AACLA,QAAAA,IAAI,IAAI,4BAAR;AACD;AACF;;AACD,QAAI,KAAKnC,KAAL,CAAWS,SAAX,KAAyB,IAA7B,EAAmC;AACjC,UAAI0B,IAAI,IAAI,EAAZ,EAAgB;AACdA,QAAAA,IAAI,IAAI,kBAAR;AACD,OAFD,MAEO;AACLA,QAAAA,IAAI,IAAI,oBAAR;AACD;AACF;;AACD,SAAKC,OAAL,CAAaE,mBAAb,CAAiCH,IAAjC;AACA,SAAKC,OAAL,CAAaG,gBAAb,CAA8B,KAAKvC,KAAL,CAAWW,aAAzC;AACA,SAAKZ,KAAL,CAAWwB,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB,EAzCe,CA0Cf;AACA;AACD;;AAEDJ,EAAAA,QAAQ,CAACQ,CAAD,EAAI;AACVG,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACD;;AAEDQ,EAAAA,MAAM,GAAG;AACP,QAAIC,SAAJ;;AAEA,QAAI,KAAKzC,KAAL,CAAWE,aAAX,KAA6B,mBAAjC,EAAsD;AACpDuC,MAAAA,SAAS,GACP,oBAAC,iBAAD;AACE,QAAA,mBAAmB,EAAE,KAAKC,mBAD5B;AAEE,QAAA,mBAAmB,EAAE,KAAKzB,mBAF5B;AAGE,QAAA,cAAc,EAAE,KAAKjB,KAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAOD,KARD,MAQO,IAAI,KAAKA,KAAL,CAAWE,aAAX,KAA6B,gBAAjC,EAAmD;AACxDuC,MAAAA,SAAS,GACP,oBAAC,cAAD;AACE,QAAA,mBAAmB,EAAE,KAAKC,mBAD5B;AAEE,QAAA,oBAAoB,EAAE,KAAKxB,oBAF7B;AAGE,QAAA,WAAW,EAAE,KAAKlB,KAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAOD,KARM,MAQA,IAAI,KAAKA,KAAL,CAAWE,aAAX,KAA6B,SAAjC,EAA4C;AACjDuC,MAAAA,SAAS,GAAG,oBAAC,OAAD;AAAS,QAAA,mBAAmB,EAAE,KAAKtB,mBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAZ;AACD;;AAED,WACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,mBAAd;AAAkC,MAAA,UAAU,EAAC,MAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,MAArB;AAA4B,MAAA,QAAQ,EAAC,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,aAAD;AACE,MAAA,SAAS,MADX,CAEE;AAFF;AAGE,MAAA,SAAS,EAAC,QAHZ;AAIE,MAAA,OAAO,EAAE,CAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAmB,MAAA,SAAS,EAAE,KAAKN,OAAL,CAAa8B,IAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGF,SADH,CANF,CADF,EAWE,oBAAC,IAAD;AACE,MAAA,SAAS,MADX,CAEE;AAFF;AAGE,MAAA,SAAS,EAAC,QAHZ;AAIE,MAAA,OAAO,EAAE,CAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAME,oBAAC,IAAD;AAAM,MAAA,IAAI,MAAV;AAAW,MAAA,EAAE,EAAE,EAAf;AAAmB,MAAA,SAAS,EAAE,KAAK5B,OAAL,CAAa8B,IAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,wBAAD;AACE,MAAA,UAAU,EAAE,KAAK7B,UADnB;AAEE,MAAA,UAAU,EAAE,KAAKE,UAFnB;AAGE,MAAA,cAAc,EAAE,KAAKK,cAHvB;AAIE,MAAA,UAAU,EAAE,KAAKrB,KAAL,CAAWY,UAJzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOE,oBAAC,MAAD,CACE;AADF;AAEE,MAAA,OAAO,EAAC,MAFV;AAGE,MAAA,KAAK,EAAC,WAHR;AAIE,MAAA,IAAI,EAAC,QAJP;AAKE,MAAA,KAAK,EAAE;AAAEgC,QAAAA,eAAe,EAAE,MAAnB;AAA2BC,QAAAA,KAAK,EAAE;AAAlC,OALT;AAME,MAAA,OAAO,EAAE,KAAKvB,QANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPF,CANF,CAXF,CAFF,CADF;AA0CD;;AAvM+B;;AAA5B1B,G,CACGkD,W,GAAc1D,U;AAwMvB,eAAeR,UAAU,CAACC,UAAU,CAACa,MAAD,CAAV,CAAmBE,GAAnB,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Grid } from '@material-ui/core';\nimport { Header } from '../../Layout';\nimport FormPersonType from './FormPersonType';\nimport FormEmergencyType from './FormEmergencyType';\nimport Textbox from './Textbox';\nimport ProgressiveMobileStepper from './ProgressiveMobileStepper';\nimport AppContext from '../../utils/AppContext';\nimport CONST from '../../utils/Constants';\nimport Button from '../../custom_theme/components/Button';\nimport Container from '../../custom_theme/components/Container';\nimport GridContainer from '../../custom_theme/components/GridContainer';\nimport soundfile from '../Home/EmergencySent.mp3';\n\nconst styles = theme => ({\n  // container: {\n  //   alignItems: 'center',\n  //   height: '60%',\n  //   border: 'black',\n  //   'border-width': 'medium',\n  //   'margin-top': '50px',\n  //   background: 'rgba(255, 255, 255, 0.8)',\n  //   'border-radius': '20px'\n  // },\n  // item: {\n  //   width: '100%',\n  //   'text-align': 'center',\n  //   'border-radius': '5px',\n  //   'margin-top': '5px',\n  //   'justify-content': 'center'\n  // },\n  // container2: {\n  //   border: 'black',\n  //   'border-width': 'medium',\n  //   'margin-top': '30px'\n  // },\n  // picture: { display: 'block', margin: '0 auto' },\n  // box: { width: '230px' },\n  // button: {\n  //   width: '80%'\n  // }\n});\n\nclass SOS extends React.Component {\n  static contextType = AppContext;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      timerOn: false,\n      componentType: 'type_of_emergency', //type_of_person //texbox\n\n      meAffected: false,\n      anotherPerson: false,\n      lifeatdanger: false,\n      injury: false,\n      illness: false,\n      poisoning: false,\n      firesmoke: false,\n      other: false,\n      emergencyNote: '',\n\n      activeStep: 0\n    };\n    this.classes = props.classes;\n    this.handleNext = this.handleNext.bind(this);\n    this.handleBack = this.handleBack.bind(this);\n    this.handleEmergencyType = this.handleEmergencyType.bind(this);\n    this.handleAffectedPeople = this.handleAffectedPeople.bind(this);\n    this.handleEmergencyNote = this.handleEmergencyNote.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.handleFinished = this.handleFinished.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n  }\n\n  onCancel() {\n    // window.alert('Your emergency request has been CANCELLED');\n    this.props.history.push('/');\n  }\n\n  showSettings(event) {\n    event.preventDefault();\n  }\n\n  handleNext(e) {\n    if (this.state.componentType === 'type_of_emergency') {\n      this.setState({ componentType: 'type_of_person' });\n    } else if (this.state.componentType === 'type_of_person')\n      this.setState({ componentType: 'textbox' });\n    else if (this.state.componentType === 'textbox') {\n      this.props.history.push('/loading');\n      //   var audio = new Audio(soundfile);\n      // setTimeout( () => audio.play(), 1000);\n    }\n    this.setState({ activeStep: this.state.activeStep + 1 });\n  }\n\n  handleBack(e) {\n    if (this.state.componentType === 'textbox') {\n      this.setState({ componentType: 'type_of_person' });\n    } else if (this.state.componentType === 'type_of_person') {\n      this.setState({ componentType: 'type_of_emergency' });\n    } else if (this.state.componentType === 'type_of_emergency') {\n      this.props.history.push('/emergency_sent');\n    }\n    this.setState({ activeStep: this.state.activeStep - 1 });\n  }\n\n  handleEmergencyType(new_emergency_state) {\n    console.log('In handleEmergencyType');\n    console.log(this.state);\n    console.log(new_emergency_state);\n    this.setState(new_emergency_state);\n  }\n\n  handleAffectedPeople(new_affected_people_state) {\n    console.log('In handleAffectedPeople');\n    console.log(new_affected_people_state);\n    this.setState(new_affected_people_state);\n    console.log(this.state);\n  }\n\n  async handleEmergencyNote(new_emergency_note_state) {\n    console.log('In handleEmergencyNote');\n    await this.setState(new_emergency_note_state);\n    await this.handleFinished();\n  }\n  handleFinished() {\n    // transmit emergency details data\n\n    let data = '';\n\n    if (this.state.meAffected === true) {\n      data += 'Caller';\n    }\n    if (this.state.anotherPerson === true) {\n      data += ' & another person';\n    }\n    this.context.setAffectedPersons(data);\n\n    data = '';\n\n    if (this.state.injury === true) {\n      data += 'Injury ';\n    }\n    if (this.state.lifeatdanger === true) {\n      if (data == '') {\n        data += 'Life is at danger';\n      } else {\n        data += ', Life is at danger';\n      }\n    }\n    if (this.state.poisoning === true) {\n      if (data == '') {\n        data += 'Person might be poisoned';\n      } else {\n        data += ', Person might be poisoned';\n      }\n    }\n    if (this.state.firesmoke === true) {\n      if (data == '') {\n        data += 'Fire is involved';\n      } else {\n        data += ', fire is involved';\n      }\n    }\n    this.context.setEmergencyDetails(data);\n    this.context.setEmergencyNote(this.state.emergencyNote);\n    this.props.history.push('/loading');\n    // var audio = new Audio(soundfile);\n    // setTimeout(() => audio.play(), 500);\n  }\n\n  onSubmit(e) {\n    console.log('in OnSubmit');\n  }\n\n  render() {\n    let component;\n\n    if (this.state.componentType === 'type_of_emergency') {\n      component = (\n        <FormEmergencyType\n          handleComponentType={this.handleComponentType}\n          handleEmergencyType={this.handleEmergencyType}\n          emergencyTypes={this.state}\n        />\n      );\n    } else if (this.state.componentType === 'type_of_person') {\n      component = (\n        <FormPersonType\n          handleComponentType={this.handleComponentType}\n          handleAffectedPeople={this.handleAffectedPeople}\n          personTypes={this.state}\n        />\n      );\n    } else if (this.state.componentType === 'textbox') {\n      component = <Textbox handleEmergencyNote={this.handleEmergencyNote} />;\n    }\n\n    return (\n      <React.Fragment>\n        <Header title=\"Specify Emergency\" BackButton=\"true\" />\n        <Container component=\"main\" maxWidth=\"sm\">\n          <GridContainer\n            container\n            // className={this.classes.container}\n            direction=\"column\"\n            spacing={2}\n          >\n            <Grid item sm={12} className={this.classes.item}>\n              {component}\n            </Grid>\n          </GridContainer>\n          <Grid\n            container\n            // className={this.classes.container2}\n            direction=\"column\"\n            spacing={2}\n          >\n            <Grid item sm={12} className={this.classes.item}>\n              <ProgressiveMobileStepper\n                handleNext={this.handleNext}\n                handleBack={this.handleBack}\n                handleFinished={this.handleFinished}\n                activeStep={this.state.activeStep}\n              />\n              <Button\n                // className={this.classes.button}\n                variant=\"text\"\n                color=\"secondary\"\n                size=\"medium\"\n                style={{ backgroundColor: 'grey', color: 'white' }}\n                onClick={this.onCancel}\n              >\n                Cancel Emergency\n              </Button>\n            </Grid>\n          </Grid>\n        </Container>\n      </React.Fragment>\n    );\n  }\n}\nexport default withRouter(withStyles(styles)(SOS));\n"]},"metadata":{},"sourceType":"module"}